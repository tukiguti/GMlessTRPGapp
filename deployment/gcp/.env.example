# 環境設定
NODE_ENV=production

# アプリケーションポート
PORT=4000

# ========================================
# データベース設定 (Supabase)
# ========================================
# Supabase Dashboard → Settings → Database → Connection String
# Format: postgresql://[user]:[password]@[host]:5432/[database]
DATABASE_URL=postgresql://postgres:YOUR_PASSWORD@db.YOUR_PROJECT.supabase.co:5432/postgres

# ========================================
# Redis設定 (Upstash)
# ========================================
# Upstash Console → Redis → Details → Connection String
# Format: rediss://default:[password]@[host]:6379
REDIS_URL=rediss://default:YOUR_PASSWORD@YOUR_REGION.upstash.io:6379

# または REST API (オプション)
UPSTASH_REDIS_REST_URL=https://YOUR_REGION.upstash.io
UPSTASH_REDIS_REST_TOKEN=YOUR_TOKEN

# ========================================
# メモリ・パフォーマンス設定
# ========================================
# Node.jsヒープメモリ制限 (MB)
# GCP e2-micro (1GB RAM) では 384MB を推奨
NODE_OPTIONS=--max-old-space-size=384

# 同時接続数の上限
# GCP e2-micro では 50-70 を推奨
MAX_CONNECTIONS=70

# ゲームセッション数の上限
MAX_ACTIVE_GAMES=20

# ========================================
# ログ設定
# ========================================
# ログレベル: error, warn, info, debug
LOG_LEVEL=info

# ログ出力先ディレクトリ
LOG_DIR=/var/log/trpg-app

# ログファイル最大サイズ (MB)
LOG_MAX_SIZE=10

# ログファイル保持日数
LOG_MAX_FILES=7

# ========================================
# CORS設定
# ========================================
# フロントエンドのURL（Vercel）
# 複数のオリジンを許可する場合はカンマ区切り
CORS_ORIGIN=https://your-app.vercel.app,https://your-custom-domain.com

# ========================================
# セッション設定
# ========================================
# セッションシークレット（ランダムな文字列を生成）
SESSION_SECRET=YOUR_RANDOM_SECRET_STRING_HERE

# セッション有効期限 (秒)
SESSION_MAX_AGE=86400

# ========================================
# WebSocket設定
# ========================================
# WebSocketパスプレフィックス
WS_PATH=/socket.io

# WebSocketタイムアウト (ミリ秒)
WS_PING_TIMEOUT=60000

# WebSocketピング間隔 (ミリ秒)
WS_PING_INTERVAL=25000

# ========================================
# ゲーム設定
# ========================================
# ゲームバランス設定ファイルのパス
GAME_BALANCE_CONFIG=./config/game_balance.yaml

# デフォルトのゲームモード
DEFAULT_GAME_MODE=standard

# ラウンド制限時間 (秒)
ROUND_TIME_LIMIT=300

# ========================================
# セキュリティ設定
# ========================================
# レート制限: ウィンドウ時間 (ミリ秒)
RATE_LIMIT_WINDOW=60000

# レート制限: 最大リクエスト数
RATE_LIMIT_MAX_REQUESTS=100

# JWT シークレット（認証機能を実装する場合）
JWT_SECRET=YOUR_JWT_SECRET_HERE

# JWT 有効期限
JWT_EXPIRES_IN=7d

# ========================================
# 監視・アラート設定
# ========================================
# エラー通知先メールアドレス（オプション）
ALERT_EMAIL=admin@example.com

# エラー通知のしきい値（エラー数/分）
ALERT_ERROR_THRESHOLD=10

# ネットワーク使用量の警告しきい値（GB）
ALERT_NETWORK_THRESHOLD=0.8

# ========================================
# 開発環境専用設定
# ========================================
# 開発モードでのみ有効
# DEBUG=trpg:*

# ========================================
# 使用方法
# ========================================
# 1. このファイルを .env にコピー
#    cp .env.example .env
#
# 2. 各値を実際の値に置き換える
#
# 3. .envファイルのパーミッションを設定
#    chmod 600 .env
#
# 4. .envファイルをgitにコミットしない
#    (.gitignoreに.envが含まれていることを確認)
