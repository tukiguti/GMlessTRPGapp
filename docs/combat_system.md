# GMレスLoL風TRPG - 戦闘・判定システム

## 目次
1. [視界システム](#視界システム)
2. [基本戦闘](#基本戦闘)
3. [マッチアップ判定](#マッチアップ判定)
4. [ダメージ計算](#ダメージ計算)
5. [デスとペナルティ](#デスとペナルティ)
6. [複数人戦闘](#複数人戦闘)

---

## 視界システム

### ワード（視界提供アイテム）

#### ワード配置
- **配置可能エリア**:
  - **レーン**: TOPレーン、MIDレーン、BOTレーン（各チーム側）
  - **ジャングル**:
    - 味方TOP-MIDジャングル
    - 味方MID-BOTジャングル
    - 敵TOP-MIDジャングル
    - 敵MID-BOTジャングル
  - **中立エリア**: ドラゴンピット、バロンピット付近

- **配置数制限**:
  - **SUP**: 3個まで配置可能
  - **その他のロール**: 1個まで配置可能

#### ワード破壊
- **発動条件**: プレイヤーがワードのあるエリアに進入
- **判定方法**: ダイス判定
  - 破壊判定ダイス: 1d20
  - 成功値: 12以上で破壊成功
- **視認**: ワードが存在することは進入時に自動で判明

### 視界の効果

#### 視界がある場合
- そのエリアに敵が進入したことを即座に把握
- ガンクを事前に察知可能
- マッチアップ判定にボーナスなし（通常判定）

#### 視界がない場合
- 敵の進入を把握不可
- ガンクされた際にペナルティ
- **JGとSUPのガンク時に+判定**（攻撃側有利）

---

## 基本戦闘

### マッチアップ判定

戦闘の基本となる判定システム。

#### 判定手順
1. **ダイスロール**: 両者が1d20をロール
2. **ステータス補正**: 攻撃力の補正値を加算
3. **視界補正**: 視界状況に応じた補正
4. **合計値比較**: 高い方が勝利

#### 判定式
```
マッチアップ判定値 = 1d20 + 攻撃力補正 + 状況補正
```

#### 判定例

**例**: レベル6のAPメイジ vs レベル6のADファイター

**プレイヤーA（APメイジ、攻撃力+7.5）**:
- ダイスロール: 15
- 判定値: 15 + 7.5 = 22.5

**プレイヤーB（ADファイター、攻撃力+4.5）**:
- ダイスロール: 12
- 判定値: 12 + 4.5 = 16.5

**結果**:
- 差分: 22.5 - 16.5 = 6
- プレイヤーA（メイジ）の勝利

---

## ダメージ計算

### ダメージ計算式

マッチアップ判定の結果に基づいてダメージを計算します。

**計算式**:
```
ダメージ = (勝者の判定値 - 敗者の判定値) × 10 - 敗者の防御力
```

- **引き分け**: 両者にダメージなし
- **最小ダメージ**: 0（防御力でダメージを完全に無効化可能）

### ダメージ計算例

**例**: 上記のマッチアップ判定の続き

**前提**:
- 差分: 6
- プレイヤーB（ファイター）の防御力: 6.4
- プレイヤーB（ファイター）のHP: 780

**ダメージ計算**:
```
ダメージ = 6 × 10 - 6.4 = 60 - 6.4 = 53.6ダメージ
```

**結果**:
- プレイヤーBのHP: 780 → 726.4

---

## デスとペナルティ

### デス条件
- HPが0以下になると撃破される

### デスペナルティ

#### 1. リスポーン時間
```
リスポーン時間 = 1ターン + (現在レベル × 0.2ターン)
```

**例**:
- レベル1: 1.2ターン（2ターン切り上げ）
- レベル10: 3ターン
- レベル18: 4.6ターン（5ターン切り上げ）

**注**: リスポーンターン数は切り上げ（最低2ターン）

#### 2. ゴールド喪失
- 現在所持ゴールドの10%を失う

#### 3. 経験値ターン提供
- **キラー（撃破者）**: +0.5経験値ターン獲得
- **アシスト（支援者）**: +0.5経験値ターン獲得

#### 4. リスポーン位置
- 自陣ネクサスから再スタート

### 復活後の状態
- **HP**: 全回復
- **位置**: 自陣ネクサスからスタート
- **アイテム**: そのまま保持
- **クールダウン**: リセットされない

---

## 複数人戦闘

### 攻撃対象選択

複数人が戦闘に参加する場合の処理手順：

1. **初回攻撃**: マッチアップ判定実行
2. **継続戦闘の場合**: 再度攻撃対象を選択
   - 各プレイヤーが攻撃対象を指定
   - 同時公開して解決
3. 各ペアごとにマッチアップ判定

### 数的有利

**2v1などの場合**:
- 攻撃側に+2ボーナス補正

### 複数人戦闘の例

**シナリオ**: プレイヤーA、B（攻撃側）vs プレイヤーC（防御側）

#### ステップ1: 攻撃対象選択
- プレイヤーA: プレイヤーCを攻撃
- プレイヤーB: プレイヤーCを攻撃
- プレイヤーC: プレイヤーAを攻撃

#### ステップ2: マッチアップ判定

**プレイヤーA vs プレイヤーC**:
- プレイヤーA: 1d20 + 6.0（攻撃力） + 2（数的有利） = 1d20 + 8.0
- プレイヤーC: 1d20 + 7.0（攻撃力） = 1d20 + 7.0

**プレイヤーB vs プレイヤーC**:
- プレイヤーB: 1d20 + 5.0（攻撃力） + 2（数的有利） = 1d20 + 7.0
- プレイヤーC: 1d20 + 7.0（攻撃力） = 1d20 + 7.0

#### ステップ3: ダメージ計算
- 各マッチアップの結果に基づいて、それぞれダメージを計算
- プレイヤーCは2回のマッチアップ判定を受けるため、2回分のダメージを受ける可能性がある

---

## 戦闘時の補正まとめ

| 状況 | 補正 | 条件 |
|------|------|------|
| **視界なし（ガンク）** | +3 | JG/SUPがガンクし、敵が視界を持たない |
| **移動力ボーナス** | +(移動力-6) | 移動力が6以上の場合 |
| **CC成功（通常スキル）** | 相手に-3 | CC判定成功＆回避失敗 |
| **CC成功（ULT）** | 相手に-6 | CC判定成功＆回避失敗 |
| **CC回避成功** | ペナルティ無効 | 回避判定成功 |
| **数的有利** | +2 | 2v1などの多対一 |
| **スキル使用** | ±2～6 | 使用するスキルによる |

---

## 変更履歴
- 2025-11-09: ゲームシステム大規模調整
  - CC効果を-5から-3（通常スキル）/-6（ULT）に変更
  - 移動力ボーナス閾値を5→6に変更
  - リスポーン時間を秒数からターン数に変更（1ターン + レベル×0.2ターン）
  - 経験値提供をXPから経験値ターン（+0.5ターン）に変更
- 2025-11-07: 初版作成（game_rules.mdから分割）
  - 視界システム、基本戦闘、マッチアップ判定、ダメージ計算、デスペナルティ、複数人戦闘を統合
